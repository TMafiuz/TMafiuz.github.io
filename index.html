<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora IMC con IA - An√°lisis Interactivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .code-panel {
            background: #1e1e1e;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .code-header {
            background: #2d2d30;
            margin: -20px -20px 20px -20px;
            padding: 15px 20px;
            color: #fff;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .code-header::before {
            content: "üêç";
            margin-right: 10px;
            font-size: 1.2em;
        }

        pre {
            background: transparent;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.6;
            overflow-x: auto;
        }

        .code-line {
            position: relative;
            padding: 2px 5px;
            border-radius: 3px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .code-line:hover {
            background: rgba(76, 175, 80, 0.15);
            transform: translateX(5px);
        }

        .explanation-panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
        }

        .explanation-content {
            display: none;
        }

        .explanation-content.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation-title {
            color: #4CAF50;
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-text {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #555;
        }

        .demo-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4CAF50;
        }

        .demo-title {
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .demo-content {
            font-family: monospace;
            background: rgba(255,255,255,0.7);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .highlight-imports { color: #569cd6; }
        .highlight-comment { color: #6a9955; }
        .highlight-string { color: #ce9178; }
        .highlight-number { color: #b5cea8; }
        .highlight-function { color: #dcdcaa; }
        .highlight-keyword { color: #c586c0; }

        .default-explanation {
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .interactive-demo {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .demo-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .demo-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .demo-button:hover {
            background: #45a049;
        }

        .demo-result {
            margin-top: 10px;
            padding: 10px;
            background: #e8f5e8;
            border-radius: 5px;
            font-weight: bold;
            color: #2e7d32;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .explanation-panel {
                position: static;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ Calculadora IMC con Inteligencia Artificial</h1>
            <p>An√°lisis interactivo del c√≥digo Python con Machine Learning</p>
        </div>

        <div class="main-content">
            <div class="code-panel">
                <div class="code-header">
                    C√≥digo Python - calculator_imc.py
                </div>
                <pre><code><div class="code-line" data-section="imports"><span class="highlight-keyword">import</span> <span class="highlight-imports">tkinter</span> <span class="highlight-keyword">as</span> <span class="highlight-imports">tk</span>
<span class="highlight-keyword">from</span> <span class="highlight-imports">tkinter</span> <span class="highlight-keyword">import</span> <span class="highlight-imports">messagebox</span>
<span class="highlight-keyword">import</span> <span class="highlight-imports">numpy</span> <span class="highlight-keyword">as</span> <span class="highlight-imports">np</span>
<span class="highlight-keyword">from</span> <span class="highlight-imports">sklearn.linear_model</span> <span class="highlight-keyword">import</span> <span class="highlight-imports">LinearRegression</span></div>

<div class="code-line" data-section="training"><span class="highlight-comment"># ======================= </span>
<span class="highlight-comment"># 1. ENTRENAR MODELO</span>
<span class="highlight-comment"># =======================</span>
<span class="highlight-imports">np</span>.<span class="highlight-function">random.seed</span>(<span class="highlight-number">42</span>)
<span class="highlight-imports">pesos</span> = <span class="highlight-imports">np</span>.<span class="highlight-function">random.uniform</span>(<span class="highlight-number">50</span>, <span class="highlight-number">100</span>, <span class="highlight-number">10</span>)
<span class="highlight-imports">alturas</span> = <span class="highlight-imports">np</span>.<span class="highlight-function">random.uniform</span>(<span class="highlight-number">1.5</span>, <span class="highlight-number">1.8</span>, <span class="highlight-number">10</span>)
<span class="highlight-imports">imcs</span> = <span class="highlight-imports">pesos</span> / (<span class="highlight-imports">alturas</span> ** <span class="highlight-number">2</span>)
<span class="highlight-imports">X</span> = <span class="highlight-imports">np</span>.<span class="highlight-function">column_stack</span>((<span class="highlight-imports">pesos</span>, <span class="highlight-imports">alturas</span>))
<span class="highlight-imports">y</span> = <span class="highlight-imports">imcs</span>
<span class="highlight-imports">modelo</span> = <span class="highlight-function">LinearRegression</span>()
<span class="highlight-imports">modelo</span>.<span class="highlight-function">fit</span>(<span class="highlight-imports">X</span>, <span class="highlight-imports">y</span>)</div>

<div class="code-line" data-section="functions"><span class="highlight-comment"># =======================</span>
<span class="highlight-comment"># 2. FUNCIONES</span>
<span class="highlight-comment"># =======================</span>
<span class="highlight-keyword">def</span> <span class="highlight-function">predecir_imc</span>():
    <span class="highlight-keyword">try</span>:
        <span class="highlight-imports">peso</span> = <span class="highlight-function">float</span>(<span class="highlight-imports">entry_peso</span>.<span class="highlight-function">get</span>())
        <span class="highlight-imports">altura</span> = <span class="highlight-function">float</span>(<span class="highlight-imports">entry_altura</span>.<span class="highlight-function">get</span>())
        <span class="highlight-keyword">if</span> <span class="highlight-imports">altura</span> <= <span class="highlight-number">0</span>:
            <span class="highlight-keyword">raise</span> <span class="highlight-function">ValueError</span>(<span class="highlight-string">"La altura debe ser mayor que cero."</span>)
        <span class="highlight-imports">imc_pred</span> = <span class="highlight-imports">modelo</span>.<span class="highlight-function">predict</span>([[<span class="highlight-imports">peso</span>, <span class="highlight-imports">altura</span>]])[<span class="highlight-number">0</span>]
        <span class="highlight-imports">messagebox</span>.<span class="highlight-function">showinfo</span>(<span class="highlight-string">"Resultado"</span>, <span class="highlight-string">f"IMC estimado: {imc_pred:.2f}"</span>)
    <span class="highlight-keyword">except</span> <span class="highlight-function">ValueError</span>:
        <span class="highlight-imports">messagebox</span>.<span class="highlight-function">showerror</span>(<span class="highlight-string">"Error"</span>, <span class="highlight-string">"Introduce valores num√©ricos v√°lidos."</span>)</div>

<div class="code-line" data-section="interface"><span class="highlight-comment"># =======================</span>
<span class="highlight-comment"># 3. INTERFAZ TKINTER</span>
<span class="highlight-comment"># =======================</span>
<span class="highlight-imports">root</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Tk</span>()
<span class="highlight-imports">root</span>.<span class="highlight-function">title</span>(<span class="highlight-string">"Calculadora de IMC con IA"</span>)
<span class="highlight-imports">root</span>.<span class="highlight-function">geometry</span>(<span class="highlight-string">"300x200"</span>)

<span class="highlight-imports">label_titulo</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Label</span>(<span class="highlight-imports">root</span>, <span class="highlight-imports">text</span>=<span class="highlight-string">"Calculadora de IMC (Regresi√≥n)"</span>, 
                           <span class="highlight-imports">font</span>=(<span class="highlight-string">"Arial"</span>, <span class="highlight-number">12</span>, <span class="highlight-string">"bold"</span>))
<span class="highlight-imports">label_titulo</span>.<span class="highlight-function">pack</span>(<span class="highlight-imports">pady</span>=<span class="highlight-number">10</span>)

<span class="highlight-imports">frame_inputs</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Frame</span>(<span class="highlight-imports">root</span>)
<span class="highlight-imports">frame_inputs</span>.<span class="highlight-function">pack</span>(<span class="highlight-imports">pady</span>=<span class="highlight-number">5</span>)

<span class="highlight-imports">label_peso</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Label</span>(<span class="highlight-imports">frame_inputs</span>, <span class="highlight-imports">text</span>=<span class="highlight-string">"Peso (kg):"</span>)
<span class="highlight-imports">label_peso</span>.<span class="highlight-function">grid</span>(<span class="highlight-imports">row</span>=<span class="highlight-number">0</span>, <span class="highlight-imports">column</span>=<span class="highlight-number">0</span>, <span class="highlight-imports">padx</span>=<span class="highlight-number">5</span>, <span class="highlight-imports">pady</span>=<span class="highlight-number">5</span>)
<span class="highlight-imports">entry_peso</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Entry</span>(<span class="highlight-imports">frame_inputs</span>)
<span class="highlight-imports">entry_peso</span>.<span class="highlight-function">grid</span>(<span class="highlight-imports">row</span>=<span class="highlight-number">0</span>, <span class="highlight-imports">column</span>=<span class="highlight-number">1</span>, <span class="highlight-imports">padx</span>=<span class="highlight-number">5</span>, <span class="highlight-imports">pady</span>=<span class="highlight-number">5</span>)

<span class="highlight-imports">label_altura</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Label</span>(<span class="highlight-imports">frame_inputs</span>, <span class="highlight-imports">text</span>=<span class="highlight-string">"Altura (m):"</span>)
<span class="highlight-imports">label_altura</span>.<span class="highlight-function">grid</span>(<span class="highlight-imports">row</span>=<span class="highlight-number">1</span>, <span class="highlight-imports">column</span>=<span class="highlight-number">0</span>, <span class="highlight-imports">padx</span>=<span class="highlight-number">5</span>, <span class="highlight-imports">pady</span>=<span class="highlight-number">5</span>)
<span class="highlight-imports">entry_altura</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Entry</span>(<span class="highlight-imports">frame_inputs</span>)
<span class="highlight-imports">entry_altura</span>.<span class="highlight-function">grid</span>(<span class="highlight-imports">row</span>=<span class="highlight-number">1</span>, <span class="highlight-imports">column</span>=<span class="highlight-number">1</span>, <span class="highlight-imports">padx</span>=<span class="highlight-number">5</span>, <span class="highlight-imports">pady</span>=<span class="highlight-number">5</span>)

<span class="highlight-imports">btn_predecir</span> = <span class="highlight-imports">tk</span>.<span class="highlight-function">Button</span>(<span class="highlight-imports">root</span>, <span class="highlight-imports">text</span>=<span class="highlight-string">"Calcular IMC"</span>, <span class="highlight-imports">command</span>=<span class="highlight-imports">predecir_imc</span>)
<span class="highlight-imports">btn_predecir</span>.<span class="highlight-function">pack</span>(<span class="highlight-imports">pady</span>=<span class="highlight-number">10</span>)

<span class="highlight-imports">root</span>.<span class="highlight-function">mainloop</span>()</code></pre>
            </div>

            <div class="explanation-panel">
                <div class="explanation-content default-explanation active">
                    <div class="explanation-title">
                        üéØ ¬°Explora el C√≥digo!
                    </div>
                    <div class="explanation-text">
                        Pasa el mouse sobre las diferentes secciones del c√≥digo Python para ver explicaciones detalladas y ejemplos interactivos de cada parte.
                    </div>
                    <div class="demo-box">
                        <div class="demo-title">üìã Resumen del Proyecto</div>
                        <p>Este proyecto combina:</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li><strong>Machine Learning:</strong> Regresi√≥n lineal con scikit-learn</li>
                            <li><strong>Interfaz Gr√°fica:</strong> Tkinter para la UI</li>
                            <li><strong>C√°lculo de IMC:</strong> Predicci√≥n basada en peso y altura</li>
                        </ul>
                    </div>
                </div>

                <div class="explanation-content" id="imports">
                    <div class="explanation-title">
                        üìö Importaci√≥n de Librer√≠as
                    </div>
                    <div class="explanation-text">
                        Se importan las librer√≠as necesarias para crear la interfaz gr√°fica y el modelo de machine learning.
                    </div>
                    <div class="demo-box">
                        <div class="demo-title">üì¶ Librer√≠as utilizadas:</div>
                        <div class="demo-content">
                            <strong>tkinter:</strong> Interfaz gr√°fica nativa de Python<br>
                            <strong>numpy:</strong> Operaciones matem√°ticas y arrays<br>
                            <strong>sklearn:</strong> Machine Learning (LinearRegression)
                        </div>
                    </div>
                </div>

                <div class="explanation-content" id="training">
                    <div class="explanation-title">
                        üß† Entrenamiento del Modelo IA
                    </div>
                    <div class="explanation-text">
                        Se crea un conjunto de datos sint√©tico y se entrena un modelo de regresi√≥n lineal para predecir el IMC.
                    </div>
                    <div class="demo-box">
                        <div class="demo-title">üé≤ Datos de Entrenamiento (simulados):</div>
                        <div class="demo-content">
                            Peso: 50-100 kg (10 muestras aleatorias)<br>
                            Altura: 1.5-1.8 m (10 muestras aleatorias)<br>
                            IMC = peso / altura¬≤
                        </div>
                    </div>
                    <div class="interactive-demo">
                        <div class="demo-title">üßÆ Calculadora IMC Manual:</div>
                        <input type="number" id="demoPeso" class="demo-input" placeholder="Ingresa peso (kg)" step="0.1">
                        <input type="number" id="demoAltura" class="demo-input" placeholder="Ingresa altura (m)" step="0.01">
                        <button class="demo-button" onclick="calcularIMC()">Calcular IMC</button>
                        <div id="resultadoIMC" class="demo-result" style="display:none;"></div>
                    </div>
                </div>

                <div class="explanation-content" id="functions">
                    <div class="explanation-title">
                        ‚öôÔ∏è Funci√≥n de Predicci√≥n
                    </div>
                    <div class="explanation-text">
                        La funci√≥n <code>predecir_imc()</code> toma los valores de peso y altura, los valida y utiliza el modelo entrenado para hacer la predicci√≥n.
                    </div>
                    <div class="demo-box">
                        <div class="demo-title">üîç Proceso de Predicci√≥n:</div>
                        <div class="demo-content">
                            1. Obtener datos de la interfaz<br>
                            2. Validar que sean n√∫meros v√°lidos<br>
                            3. Usar modelo.predict() para estimar IMC<br>
                            4. Mostrar resultado en ventana emergente
                        </div>
                    </div>
                    <div class="demo-box">
                        <div class="demo-title">‚ö†Ô∏è Manejo de Errores:</div>
                        <div class="demo-content">
                            ‚Ä¢ Verifica que altura > 0<br>
                            ‚Ä¢ Captura errores de conversi√≥n de tipos<br>
                            ‚Ä¢ Muestra mensajes de error amigables
                        </div>
                    </div>
                </div>

                <div class="explanation-content" id="interface">
                    <div class="explanation-title">
                        üñ•Ô∏è Interfaz Gr√°fica Tkinter
                    </div>
                    <div class="explanation-text">
                        Se crea una ventana con campos de entrada para peso y altura, y un bot√≥n para calcular el IMC usando el modelo de IA.
                    </div>
                    <div class="demo-box">
                        <div class="demo-title">üé® Elementos de la UI:</div>
                        <div class="demo-content">
                            ‚Ä¢ <strong>Ventana principal:</strong> 300x200 p√≠xeles<br>
                            ‚Ä¢ <strong>Labels:</strong> Etiquetas para peso y altura<br>
                            ‚Ä¢ <strong>Entries:</strong> Campos de entrada num√©rica<br>
                            ‚Ä¢ <strong>Button:</strong> Bot√≥n "Calcular IMC"<br>
                            ‚Ä¢ <strong>Grid/Pack:</strong> Gesti√≥n de layout
                        </div>
                    </div>
                    <div class="interactive-demo">
                        <div class="demo-title">üéØ Clasificaci√≥n IMC:</div>
                        <div style="font-size: 0.9em;">
                            <strong>Bajo peso:</strong> &lt; 18.5<br>
                            <strong>Normal:</strong> 18.5 - 24.9<br>
                            <strong>Sobrepeso:</strong> 25.0 - 29.9<br>
                            <strong>Obesidad:</strong> ‚â• 30.0
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Manejo de las explicaciones interactivas
        const codeLines = document.querySelectorAll('.code-line');
        const explanations = document.querySelectorAll('.explanation-content');

        codeLines.forEach(line => {
            line.addEventListener('mouseenter', function() {
                const section = this.getAttribute('data-section');
                if (section) {
                    // Ocultar todas las explicaciones
                    explanations.forEach(exp => exp.classList.remove('active'));
                    
                    // Mostrar la explicaci√≥n correspondiente
                    const targetExplanation = document.getElementById(section);
                    if (targetExplanation) {
                        targetExplanation.classList.add('active');
                    }
                }
            });
        });

        // Volver a la explicaci√≥n por defecto cuando no hay hover
        document.querySelector('.code-panel').addEventListener('mouseleave', function() {
            explanations.forEach(exp => exp.classList.remove('active'));
            document.querySelector('.default-explanation').classList.add('active');
        });

        // Funci√≥n para calcular IMC en la demo interactiva
        function calcularIMC() {
            const peso = parseFloat(document.getElementById('demoPeso').value);
            const altura = parseFloat(document.getElementById('demoAltura').value);
            const resultado = document.getElementById('resultadoIMC');
            
            if (isNaN(peso) || isNaN(altura) || altura <= 0) {
                resultado.innerHTML = '‚ùå Por favor ingresa valores v√°lidos';
                resultado.style.background = '#ffebee';
                resultado.style.color = '#c62828';
            } else {
                const imc = peso / (altura * altura);
                let categoria = '';
                
                if (imc < 18.5) categoria = 'Bajo peso';
                else if (imc < 25) categoria = 'Normal';
                else if (imc < 30) categoria = 'Sobrepeso';
                else categoria = 'Obesidad';
                
                resultado.innerHTML = `‚úÖ IMC: ${imc.toFixed(2)} - ${categoria}`;
                resultado.style.background = '#e8f5e8';
                resultado.style.color = '#2e7d32';
            }
            
            resultado.style.display = 'block';
        }

        // Permitir calcular con Enter
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && (document.activeElement.id === 'demoPeso' || document.activeElement.id === 'demoAltura')) {
                calcularIMC();
            }
        });
    </script>
</body>
</html>
